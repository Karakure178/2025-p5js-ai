// 棒針編みの編み図
let cellSize = 30; // 各編み目のサイズ
let patternSize = 7; // パターンのサイズ（7x7）
let gridCols, gridRows; // グリッドの列数と行数
let offsetX, offsetY; // 中央配置のためのオフセット

// 編み記号を定義
const KNIT = 0; // 表編み（空白）
const PURL = 1; // 裏編み（横線）

// 100通りのパターン配列（7x7の表目と裏目の組み合わせ）
let patterns = [];
let currentPattern; // 現在表示中のパターン

// 100通りのパターンを生成する関数
function generatePatterns() {
  patterns = [
    // 基本パターン（1-10）
    [
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 0, 1, 0, 1, 0],
    ],
    [
      [1, 1, 1, 1, 1, 1, 1],
      [1, 0, 0, 0, 0, 0, 1],
      [1, 0, 1, 1, 1, 0, 1],
      [1, 0, 1, 0, 1, 0, 1],
      [1, 0, 1, 1, 1, 0, 1],
      [1, 0, 0, 0, 0, 0, 1],
      [1, 1, 1, 1, 1, 1, 1],
    ],
    [
      [0, 0, 0, 1, 0, 0, 0],
      [0, 0, 1, 1, 1, 0, 0],
      [0, 1, 1, 1, 1, 1, 0],
      [1, 1, 1, 1, 1, 1, 1],
      [0, 1, 1, 1, 1, 1, 0],
      [0, 0, 1, 1, 1, 0, 0],
      [0, 0, 0, 1, 0, 0, 0],
    ],
    [
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
    ],
    [
      [0, 0, 0, 0, 0, 0, 0],
      [0, 1, 1, 1, 1, 1, 0],
      [0, 1, 0, 0, 0, 1, 0],
      [0, 1, 0, 1, 0, 1, 0],
      [0, 1, 0, 0, 0, 1, 0],
      [0, 1, 1, 1, 1, 1, 0],
      [0, 0, 0, 0, 0, 0, 0],
    ],
    [
      [1, 1, 0, 0, 0, 1, 1],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 0, 1, 0, 1, 0],
      [0, 0, 1, 1, 1, 0, 0],
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [1, 1, 0, 0, 0, 1, 1],
    ],
    [
      [0, 1, 0, 1, 0, 1, 0],
      [1, 1, 1, 0, 1, 1, 1],
      [0, 1, 0, 0, 0, 1, 0],
      [1, 0, 0, 1, 0, 0, 1],
      [0, 1, 0, 0, 0, 1, 0],
      [1, 1, 1, 0, 1, 1, 1],
      [0, 1, 0, 1, 0, 1, 0],
    ],
    [
      [1, 0, 0, 0, 0, 0, 1],
      [0, 1, 0, 0, 0, 1, 0],
      [0, 0, 1, 0, 1, 0, 0],
      [0, 0, 0, 1, 0, 0, 0],
      [0, 0, 1, 0, 1, 0, 0],
      [0, 1, 0, 0, 0, 1, 0],
      [1, 0, 0, 0, 0, 0, 1],
    ],
    [
      [0, 0, 1, 1, 1, 0, 0],
      [0, 1, 0, 0, 0, 1, 0],
      [1, 0, 0, 0, 0, 0, 1],
      [1, 0, 0, 0, 0, 0, 1],
      [1, 0, 0, 0, 0, 0, 1],
      [0, 1, 0, 0, 0, 1, 0],
      [0, 0, 1, 1, 1, 0, 0],
    ],
    [
      [1, 1, 1, 0, 1, 1, 1],
      [1, 0, 0, 0, 0, 0, 1],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 0, 0, 1, 0, 0, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [1, 0, 0, 0, 0, 0, 1],
      [1, 1, 1, 0, 1, 1, 1],
    ],

    // 幾何学パターン（11-30）
    [
      [0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0],
      [0, 0, 1, 1, 1, 0, 0],
      [0, 0, 1, 1, 1, 0, 0],
      [0, 0, 1, 1, 1, 0, 0],
      [0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0],
    ],
    [
      [1, 1, 1, 1, 1, 1, 1],
      [0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0],
      [1, 1, 1, 1, 1, 1, 1],
    ],
    [
      [1, 0, 0, 1, 0, 0, 1],
      [0, 1, 0, 1, 0, 1, 0],
      [0, 0, 1, 1, 1, 0, 0],
      [1, 1, 1, 0, 1, 1, 1],
      [0, 0, 1, 1, 1, 0, 0],
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 0, 1, 0, 0, 1],
    ],
    [
      [0, 1, 1, 1, 1, 1, 0],
      [1, 0, 0, 0, 0, 0, 1],
      [1, 0, 0, 0, 0, 0, 1],
      [1, 0, 0, 0, 0, 0, 1],
      [1, 0, 0, 0, 0, 0, 1],
      [1, 0, 0, 0, 0, 0, 1],
      [0, 1, 1, 1, 1, 1, 0],
    ],
    [
      [1, 0, 1, 0, 1, 0, 1],
      [0, 0, 0, 0, 0, 0, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 0, 0, 0, 0, 0, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 0, 0, 0, 0, 0, 0],
      [1, 0, 1, 0, 1, 0, 1],
    ],
    [
      [0, 0, 0, 1, 0, 0, 0],
      [0, 0, 1, 0, 1, 0, 0],
      [0, 1, 0, 0, 0, 1, 0],
      [1, 0, 0, 0, 0, 0, 1],
      [0, 1, 0, 0, 0, 1, 0],
      [0, 0, 1, 0, 1, 0, 0],
      [0, 0, 0, 1, 0, 0, 0],
    ],
    [
      [1, 1, 1, 1, 1, 1, 1],
      [1, 0, 0, 0, 0, 0, 1],
      [1, 0, 0, 0, 0, 0, 1],
      [1, 0, 0, 0, 0, 0, 1],
      [1, 0, 0, 0, 0, 0, 1],
      [1, 0, 0, 0, 0, 0, 1],
      [1, 1, 1, 1, 1, 1, 1],
    ],
    [
      [0, 1, 0, 0, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 0, 1, 0, 1, 0],
      [0, 0, 1, 1, 1, 0, 0],
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 0, 0, 0, 1, 0],
    ],
    [
      [1, 0, 1, 0, 1, 0, 1],
      [1, 0, 1, 0, 1, 0, 1],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 0, 0, 0, 0, 0, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [1, 0, 1, 0, 1, 0, 1],
      [1, 0, 1, 0, 1, 0, 1],
    ],
    [
      [0, 0, 1, 0, 1, 0, 0],
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 0, 1, 0, 1, 0],
      [0, 0, 1, 0, 1, 0, 0],
    ],
    [
      [1, 1, 0, 1, 0, 1, 1],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [1, 1, 0, 1, 0, 1, 1],
    ],
    [
      [0, 0, 0, 0, 0, 0, 0],
      [0, 1, 1, 1, 1, 1, 0],
      [0, 1, 0, 1, 0, 1, 0],
      [0, 1, 1, 0, 1, 1, 0],
      [0, 1, 0, 1, 0, 1, 0],
      [0, 1, 1, 1, 1, 1, 0],
      [0, 0, 0, 0, 0, 0, 0],
    ],
    [
      [1, 0, 0, 0, 0, 0, 1],
      [0, 1, 1, 1, 1, 1, 0],
      [0, 1, 0, 0, 0, 1, 0],
      [0, 1, 0, 0, 0, 1, 0],
      [0, 1, 0, 0, 0, 1, 0],
      [0, 1, 1, 1, 1, 1, 0],
      [1, 0, 0, 0, 0, 0, 1],
    ],
    [
      [0, 1, 0, 1, 0, 1, 0],
      [0, 0, 1, 0, 1, 0, 0],
      [0, 0, 0, 1, 0, 0, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 0, 0, 1, 0, 0, 0],
      [0, 0, 1, 0, 1, 0, 0],
      [0, 1, 0, 1, 0, 1, 0],
    ],
    [
      [1, 1, 1, 0, 1, 1, 1],
      [0, 0, 0, 1, 0, 0, 0],
      [0, 0, 0, 1, 0, 0, 0],
      [0, 1, 1, 1, 1, 1, 0],
      [0, 0, 0, 1, 0, 0, 0],
      [0, 0, 0, 1, 0, 0, 0],
      [1, 1, 1, 0, 1, 1, 1],
    ],
    [
      [0, 1, 1, 1, 1, 1, 0],
      [1, 0, 1, 1, 1, 0, 1],
      [1, 1, 0, 1, 0, 1, 1],
      [1, 1, 1, 0, 1, 1, 1],
      [1, 1, 0, 1, 0, 1, 1],
      [1, 0, 1, 1, 1, 0, 1],
      [0, 1, 1, 1, 1, 1, 0],
    ],
    [
      [1, 0, 1, 1, 1, 0, 1],
      [0, 1, 0, 0, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [1, 0, 0, 1, 0, 0, 1],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 0, 0, 0, 1, 0],
      [1, 0, 1, 1, 1, 0, 1],
    ],
    [
      [0, 0, 0, 1, 0, 0, 0],
      [0, 0, 1, 1, 1, 0, 0],
      [0, 1, 1, 0, 1, 1, 0],
      [1, 1, 0, 0, 0, 1, 1],
      [0, 1, 1, 0, 1, 1, 0],
      [0, 0, 1, 1, 1, 0, 0],
      [0, 0, 0, 1, 0, 0, 0],
    ],
    [
      [1, 1, 0, 0, 0, 1, 1],
      [0, 0, 1, 1, 1, 0, 0],
      [0, 1, 1, 1, 1, 1, 0],
      [0, 1, 1, 1, 1, 1, 0],
      [0, 1, 1, 1, 1, 1, 0],
      [0, 0, 1, 1, 1, 0, 0],
      [1, 1, 0, 0, 0, 1, 1],
    ],
    [
      [0, 1, 0, 0, 0, 1, 0],
      [1, 0, 0, 0, 0, 0, 1],
      [0, 0, 1, 1, 1, 0, 0],
      [0, 0, 1, 0, 1, 0, 0],
      [0, 0, 1, 1, 1, 0, 0],
      [1, 0, 0, 0, 0, 0, 1],
      [0, 1, 0, 0, 0, 1, 0],
    ],

    // 対称パターン（31-50）
    [
      [1, 0, 0, 1, 0, 0, 1],
      [0, 1, 0, 1, 0, 1, 0],
      [0, 0, 1, 1, 1, 0, 0],
      [1, 1, 1, 0, 1, 1, 1],
      [0, 0, 1, 1, 1, 0, 0],
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 0, 1, 0, 0, 1],
    ],
    [
      [0, 1, 1, 0, 1, 1, 0],
      [1, 0, 0, 1, 0, 0, 1],
      [1, 0, 0, 1, 0, 0, 1],
      [0, 1, 1, 0, 1, 1, 0],
      [1, 0, 0, 1, 0, 0, 1],
      [1, 0, 0, 1, 0, 0, 1],
      [0, 1, 1, 0, 1, 1, 0],
    ],
    [
      [1, 1, 0, 1, 0, 1, 1],
      [1, 0, 0, 0, 0, 0, 1],
      [0, 0, 1, 0, 1, 0, 0],
      [1, 0, 0, 1, 0, 0, 1],
      [0, 0, 1, 0, 1, 0, 0],
      [1, 0, 0, 0, 0, 0, 1],
      [1, 1, 0, 1, 0, 1, 1],
    ],
    [
      [0, 0, 1, 1, 1, 0, 0],
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [1, 1, 0, 0, 0, 1, 1],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 0, 1, 0, 1, 0],
      [0, 0, 1, 1, 1, 0, 0],
    ],
    [
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 1, 1, 1, 1, 0],
      [1, 1, 0, 0, 0, 1, 1],
      [0, 1, 0, 0, 0, 1, 0],
      [1, 1, 0, 0, 0, 1, 1],
      [0, 1, 1, 1, 1, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
    ],
    [
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 1, 1, 1, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 1, 1, 1, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 0, 1, 0, 1, 0],
    ],
    [
      [1, 1, 1, 1, 1, 1, 1],
      [1, 0, 0, 1, 0, 0, 1],
      [1, 0, 0, 1, 0, 0, 1],
      [1, 1, 1, 0, 1, 1, 1],
      [1, 0, 0, 1, 0, 0, 1],
      [1, 0, 0, 1, 0, 0, 1],
      [1, 1, 1, 1, 1, 1, 1],
    ],
    [
      [0, 0, 0, 1, 0, 0, 0],
      [0, 1, 1, 0, 1, 1, 0],
      [0, 1, 0, 0, 0, 1, 0],
      [1, 0, 0, 0, 0, 0, 1],
      [0, 1, 0, 0, 0, 1, 0],
      [0, 1, 1, 0, 1, 1, 0],
      [0, 0, 0, 1, 0, 0, 0],
    ],
    [
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 0, 0, 0, 1, 0],
      [1, 0, 0, 1, 0, 0, 1],
      [0, 0, 1, 0, 1, 0, 0],
      [1, 0, 0, 1, 0, 0, 1],
      [0, 1, 0, 0, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
    ],
    [
      [0, 1, 1, 1, 1, 1, 0],
      [1, 0, 0, 0, 0, 0, 1],
      [1, 0, 1, 1, 1, 0, 1],
      [1, 0, 1, 0, 1, 0, 1],
      [1, 0, 1, 1, 1, 0, 1],
      [1, 0, 0, 0, 0, 0, 1],
      [0, 1, 1, 1, 1, 1, 0],
    ],
    [
      [1, 1, 0, 0, 0, 1, 1],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 1, 0, 1, 1, 0],
      [0, 0, 0, 1, 0, 0, 0],
      [0, 1, 1, 0, 1, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [1, 1, 0, 0, 0, 1, 1],
    ],
    [
      [0, 0, 1, 0, 1, 0, 0],
      [0, 1, 1, 1, 1, 1, 0],
      [1, 1, 0, 1, 0, 1, 1],
      [0, 1, 1, 0, 1, 1, 0],
      [1, 1, 0, 1, 0, 1, 1],
      [0, 1, 1, 1, 1, 1, 0],
      [0, 0, 1, 0, 1, 0, 0],
    ],
    [
      [1, 0, 0, 1, 0, 0, 1],
      [0, 0, 1, 1, 1, 0, 0],
      [0, 1, 1, 0, 1, 1, 0],
      [1, 1, 0, 0, 0, 1, 1],
      [0, 1, 1, 0, 1, 1, 0],
      [0, 0, 1, 1, 1, 0, 0],
      [1, 0, 0, 1, 0, 0, 1],
    ],
    [
      [0, 1, 0, 0, 0, 1, 0],
      [1, 1, 1, 0, 1, 1, 1],
      [0, 1, 0, 1, 0, 1, 0],
      [0, 0, 1, 1, 1, 0, 0],
      [0, 1, 0, 1, 0, 1, 0],
      [1, 1, 1, 0, 1, 1, 1],
      [0, 1, 0, 0, 0, 1, 0],
    ],
    [
      [1, 1, 1, 0, 1, 1, 1],
      [1, 0, 1, 0, 1, 0, 1],
      [1, 1, 1, 0, 1, 1, 1],
      [0, 0, 0, 1, 0, 0, 0],
      [1, 1, 1, 0, 1, 1, 1],
      [1, 0, 1, 0, 1, 0, 1],
      [1, 1, 1, 0, 1, 1, 1],
    ],
    [
      [0, 0, 0, 1, 0, 0, 0],
      [0, 1, 0, 1, 0, 1, 0],
      [0, 0, 1, 1, 1, 0, 0],
      [1, 1, 1, 1, 1, 1, 1],
      [0, 0, 1, 1, 1, 0, 0],
      [0, 1, 0, 1, 0, 1, 0],
      [0, 0, 0, 1, 0, 0, 0],
    ],
    [
      [1, 0, 1, 1, 1, 0, 1],
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [1, 1, 0, 0, 0, 1, 1],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 1, 1, 1, 0, 1],
    ],
    [
      [0, 1, 1, 0, 1, 1, 0],
      [1, 0, 0, 0, 0, 0, 1],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 0, 0, 1, 0, 0, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [1, 0, 0, 0, 0, 0, 1],
      [0, 1, 1, 0, 1, 1, 0],
    ],
    [
      [1, 1, 0, 1, 0, 1, 1],
      [1, 0, 1, 1, 1, 0, 1],
      [0, 1, 1, 0, 1, 1, 0],
      [1, 1, 0, 0, 0, 1, 1],
      [0, 1, 1, 0, 1, 1, 0],
      [1, 0, 1, 1, 1, 0, 1],
      [1, 1, 0, 1, 0, 1, 1],
    ],
    [
      [0, 0, 1, 0, 1, 0, 0],
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 1, 1, 1, 0, 1],
      [0, 1, 1, 0, 1, 1, 0],
      [1, 0, 1, 1, 1, 0, 1],
      [0, 1, 0, 1, 0, 1, 0],
      [0, 0, 1, 0, 1, 0, 0],
    ],

    // 複雑パターン（51-70）
    [
      [1, 0, 1, 1, 1, 0, 1],
      [0, 1, 0, 0, 0, 1, 0],
      [1, 0, 0, 1, 0, 0, 1],
      [1, 0, 1, 0, 1, 0, 1],
      [1, 0, 0, 1, 0, 0, 1],
      [0, 1, 0, 0, 0, 1, 0],
      [1, 0, 1, 1, 1, 0, 1],
    ],
    [
      [0, 1, 1, 1, 1, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [1, 1, 0, 1, 0, 1, 1],
      [1, 0, 1, 0, 1, 0, 1],
      [1, 1, 0, 1, 0, 1, 1],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 1, 1, 1, 1, 0],
    ],
    [
      [1, 1, 0, 0, 0, 1, 1],
      [1, 0, 0, 1, 0, 0, 1],
      [0, 0, 1, 1, 1, 0, 0],
      [0, 1, 1, 0, 1, 1, 0],
      [0, 0, 1, 1, 1, 0, 0],
      [1, 0, 0, 1, 0, 0, 1],
      [1, 1, 0, 0, 0, 1, 1],
    ],
    [
      [0, 0, 1, 0, 1, 0, 0],
      [0, 1, 0, 0, 0, 1, 0],
      [1, 0, 0, 1, 0, 0, 1],
      [0, 0, 1, 1, 1, 0, 0],
      [1, 0, 0, 1, 0, 0, 1],
      [0, 1, 0, 0, 0, 1, 0],
      [0, 0, 1, 0, 1, 0, 0],
    ],
    [
      [1, 0, 0, 1, 0, 0, 1],
      [0, 0, 1, 0, 1, 0, 0],
      [0, 1, 1, 1, 1, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 1, 1, 1, 1, 0],
      [0, 0, 1, 0, 1, 0, 0],
      [1, 0, 0, 1, 0, 0, 1],
    ],
    [
      [0, 1, 0, 1, 0, 1, 0],
      [1, 1, 0, 1, 0, 1, 1],
      [0, 0, 1, 0, 1, 0, 0],
      [1, 1, 0, 0, 0, 1, 1],
      [0, 0, 1, 0, 1, 0, 0],
      [1, 1, 0, 1, 0, 1, 1],
      [0, 1, 0, 1, 0, 1, 0],
    ],
    [
      [1, 1, 1, 0, 1, 1, 1],
      [1, 0, 0, 0, 0, 0, 1],
      [1, 0, 1, 1, 1, 0, 1],
      [0, 0, 1, 0, 1, 0, 0],
      [1, 0, 1, 1, 1, 0, 1],
      [1, 0, 0, 0, 0, 0, 1],
      [1, 1, 1, 0, 1, 1, 1],
    ],
    [
      [0, 0, 0, 1, 0, 0, 0],
      [0, 1, 1, 1, 1, 1, 0],
      [0, 1, 0, 0, 0, 1, 0],
      [1, 1, 0, 1, 0, 1, 1],
      [0, 1, 0, 0, 0, 1, 0],
      [0, 1, 1, 1, 1, 1, 0],
      [0, 0, 0, 1, 0, 0, 0],
    ],
    [
      [1, 0, 1, 0, 1, 0, 1],
      [0, 0, 0, 1, 0, 0, 0],
      [1, 0, 1, 1, 1, 0, 1],
      [0, 1, 1, 0, 1, 1, 0],
      [1, 0, 1, 1, 1, 0, 1],
      [0, 0, 0, 1, 0, 0, 0],
      [1, 0, 1, 0, 1, 0, 1],
    ],
    [
      [0, 1, 1, 0, 1, 1, 0],
      [1, 0, 0, 1, 0, 0, 1],
      [1, 0, 1, 1, 1, 0, 1],
      [0, 1, 1, 0, 1, 1, 0],
      [1, 0, 1, 1, 1, 0, 1],
      [1, 0, 0, 1, 0, 0, 1],
      [0, 1, 1, 0, 1, 1, 0],
    ],
    [
      [1, 1, 0, 1, 0, 1, 1],
      [1, 0, 0, 0, 0, 0, 1],
      [0, 0, 1, 0, 1, 0, 0],
      [1, 0, 0, 0, 0, 0, 1],
      [0, 0, 1, 0, 1, 0, 0],
      [1, 0, 0, 0, 0, 0, 1],
      [1, 1, 0, 1, 0, 1, 1],
    ],
    [
      [0, 0, 1, 1, 1, 0, 0],
      [0, 1, 0, 0, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [1, 0, 0, 0, 0, 0, 1],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 0, 0, 0, 1, 0],
      [0, 0, 1, 1, 1, 0, 0],
    ],
    [
      [1, 0, 0, 0, 0, 0, 1],
      [0, 1, 1, 0, 1, 1, 0],
      [0, 1, 0, 1, 0, 1, 0],
      [0, 0, 1, 1, 1, 0, 0],
      [0, 1, 0, 1, 0, 1, 0],
      [0, 1, 1, 0, 1, 1, 0],
      [1, 0, 0, 0, 0, 0, 1],
    ],
    [
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 1, 0, 1, 1, 0],
      [1, 0, 0, 1, 0, 0, 1],
      [0, 1, 1, 0, 1, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 0, 1, 0, 1, 0],
    ],
    [
      [1, 1, 1, 1, 1, 1, 1],
      [1, 0, 0, 0, 0, 0, 1],
      [1, 0, 1, 0, 1, 0, 1],
      [1, 0, 0, 1, 0, 0, 1],
      [1, 0, 1, 0, 1, 0, 1],
      [1, 0, 0, 0, 0, 0, 1],
      [1, 1, 1, 1, 1, 1, 1],
    ],
    [
      [0, 0, 0, 1, 0, 0, 0],
      [0, 1, 0, 1, 0, 1, 0],
      [0, 0, 1, 1, 1, 0, 0],
      [1, 1, 1, 0, 1, 1, 1],
      [0, 0, 1, 1, 1, 0, 0],
      [0, 1, 0, 1, 0, 1, 0],
      [0, 0, 0, 1, 0, 0, 0],
    ],
    [
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 1, 1, 1, 1, 0],
      [1, 1, 0, 1, 0, 1, 1],
      [0, 1, 1, 1, 1, 1, 0],
      [1, 1, 0, 1, 0, 1, 1],
      [0, 1, 1, 1, 1, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
    ],
    [
      [0, 1, 0, 0, 0, 1, 0],
      [1, 1, 1, 0, 1, 1, 1],
      [0, 1, 0, 0, 0, 1, 0],
      [0, 0, 0, 1, 0, 0, 0],
      [0, 1, 0, 0, 0, 1, 0],
      [1, 1, 1, 0, 1, 1, 1],
      [0, 1, 0, 0, 0, 1, 0],
    ],
    [
      [1, 1, 0, 1, 0, 1, 1],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 1, 1, 1, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 1, 1, 1, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [1, 1, 0, 1, 0, 1, 1],
    ],
    [
      [0, 0, 1, 0, 1, 0, 0],
      [0, 1, 1, 0, 1, 1, 0],
      [1, 1, 0, 0, 0, 1, 1],
      [0, 0, 0, 1, 0, 0, 0],
      [1, 1, 0, 0, 0, 1, 1],
      [0, 1, 1, 0, 1, 1, 0],
      [0, 0, 1, 0, 1, 0, 0],
    ],

    // ランダム風パターン（71-90）
    [
      [1, 0, 1, 1, 0, 1, 0],
      [0, 1, 0, 1, 0, 0, 1],
      [1, 0, 0, 0, 1, 1, 0],
      [1, 1, 0, 1, 0, 1, 1],
      [0, 1, 1, 0, 0, 0, 1],
      [1, 0, 1, 0, 1, 1, 0],
      [0, 0, 1, 1, 0, 1, 0],
    ],
    [
      [0, 1, 1, 0, 1, 0, 1],
      [1, 0, 0, 1, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 1, 1, 0, 0, 0],
      [1, 0, 1, 0, 0, 1, 1],
      [0, 1, 0, 1, 1, 0, 1],
      [1, 0, 1, 0, 1, 0, 0],
    ],
    [
      [1, 1, 0, 1, 0, 0, 1],
      [1, 0, 1, 0, 1, 1, 0],
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 0, 1, 1, 0, 1],
      [0, 0, 1, 0, 1, 0, 0],
      [1, 1, 0, 0, 1, 0, 1],
      [0, 1, 1, 0, 0, 1, 1],
    ],
    [
      [0, 0, 1, 1, 1, 0, 1],
      [0, 1, 0, 0, 1, 1, 0],
      [1, 1, 0, 1, 0, 0, 0],
      [1, 0, 1, 0, 0, 1, 1],
      [0, 1, 0, 0, 1, 0, 1],
      [1, 0, 0, 1, 1, 0, 0],
      [1, 0, 1, 0, 0, 1, 0],
    ],
    [
      [1, 0, 0, 1, 0, 1, 1],
      [0, 1, 1, 0, 1, 0, 0],
      [0, 0, 1, 1, 0, 0, 1],
      [1, 1, 0, 0, 1, 1, 0],
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [1, 0, 0, 1, 1, 0, 0],
    ],
    [
      [0, 1, 0, 0, 1, 1, 0],
      [1, 0, 1, 1, 0, 0, 1],
      [0, 1, 1, 0, 1, 0, 0],
      [1, 0, 0, 1, 0, 1, 1],
      [1, 1, 0, 0, 1, 0, 1],
      [0, 0, 1, 1, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
    ],
    [
      [1, 1, 1, 0, 0, 1, 0],
      [1, 0, 0, 1, 1, 0, 1],
      [0, 1, 0, 1, 0, 0, 0],
      [0, 0, 1, 0, 1, 1, 1],
      [1, 0, 0, 1, 0, 1, 0],
      [0, 1, 1, 0, 0, 0, 1],
      [1, 0, 1, 1, 1, 0, 0],
    ],
    [
      [0, 0, 1, 0, 1, 0, 1],
      [0, 1, 0, 1, 0, 1, 1],
      [1, 1, 1, 0, 0, 0, 0],
      [0, 1, 0, 1, 1, 0, 1],
      [1, 0, 1, 0, 0, 1, 0],
      [1, 0, 0, 1, 1, 1, 0],
      [0, 1, 0, 0, 1, 0, 1],
    ],
    [
      [1, 0, 1, 1, 0, 0, 1],
      [0, 1, 0, 0, 1, 1, 0],
      [1, 0, 0, 1, 0, 1, 1],
      [0, 0, 1, 1, 1, 0, 0],
      [1, 1, 0, 1, 0, 0, 1],
      [0, 1, 1, 0, 1, 0, 0],
      [1, 0, 1, 0, 0, 1, 1],
    ],
    [
      [0, 1, 1, 0, 1, 1, 0],
      [1, 0, 0, 1, 0, 0, 1],
      [1, 1, 0, 0, 0, 1, 0],
      [0, 0, 1, 1, 1, 0, 1],
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [1, 1, 0, 0, 1, 0, 0],
    ],
    [
      [1, 0, 0, 1, 1, 0, 1],
      [0, 1, 1, 0, 0, 1, 0],
      [0, 0, 1, 1, 0, 1, 1],
      [1, 1, 0, 1, 1, 0, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 0, 0, 0, 1, 1],
      [1, 0, 1, 1, 0, 0, 0],
    ],
    [
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 1, 0, 1, 1, 1],
      [0, 0, 1, 1, 0, 0, 0],
      [1, 1, 0, 0, 1, 0, 1],
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 1, 1, 0, 0, 1],
      [0, 1, 0, 0, 1, 1, 0],
    ],
    [
      [1, 1, 0, 0, 1, 0, 1],
      [1, 0, 1, 1, 0, 1, 0],
      [0, 1, 0, 1, 0, 0, 1],
      [0, 0, 1, 0, 1, 1, 0],
      [1, 0, 0, 1, 1, 0, 1],
      [0, 1, 1, 0, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 0],
    ],
    [
      [0, 0, 1, 1, 0, 1, 0],
      [0, 1, 0, 0, 1, 0, 1],
      [1, 1, 0, 1, 0, 1, 0],
      [1, 0, 1, 1, 1, 0, 0],
      [0, 1, 0, 0, 1, 1, 1],
      [1, 0, 1, 1, 0, 0, 0],
      [0, 1, 0, 1, 0, 1, 1],
    ],
    [
      [1, 0, 1, 0, 0, 1, 1],
      [0, 1, 0, 1, 1, 0, 0],
      [1, 0, 0, 1, 0, 1, 0],
      [0, 0, 1, 0, 1, 0, 1],
      [1, 1, 0, 1, 0, 0, 1],
      [0, 1, 1, 0, 1, 1, 0],
      [1, 0, 0, 1, 1, 0, 0],
    ],
    [
      [0, 1, 1, 1, 0, 0, 1],
      [1, 0, 0, 0, 1, 1, 0],
      [1, 0, 1, 1, 0, 1, 0],
      [0, 1, 1, 0, 1, 0, 1],
      [1, 0, 0, 1, 0, 0, 0],
      [0, 1, 0, 0, 1, 1, 1],
      [1, 0, 1, 0, 0, 1, 0],
    ],
    [
      [1, 1, 0, 1, 1, 0, 0],
      [1, 0, 1, 0, 0, 1, 1],
      [0, 1, 0, 0, 1, 0, 0],
      [0, 0, 1, 1, 0, 1, 1],
      [1, 0, 0, 1, 1, 0, 1],
      [0, 1, 1, 0, 1, 0, 0],
      [1, 0, 1, 1, 0, 0, 1],
    ],
    [
      [0, 0, 1, 0, 1, 1, 0],
      [0, 1, 1, 1, 0, 0, 1],
      [1, 0, 0, 1, 0, 1, 0],
      [1, 1, 0, 0, 1, 0, 1],
      [0, 1, 1, 0, 0, 1, 0],
      [1, 0, 0, 1, 1, 0, 1],
      [0, 1, 0, 1, 0, 1, 0],
    ],
    [
      [1, 0, 0, 1, 0, 1, 0],
      [0, 1, 1, 0, 1, 0, 1],
      [0, 0, 1, 1, 0, 1, 1],
      [1, 1, 0, 1, 1, 0, 0],
      [1, 0, 1, 0, 0, 1, 0],
      [0, 1, 0, 0, 1, 1, 1],
      [1, 0, 1, 1, 0, 0, 0],
    ],
    [
      [0, 1, 0, 0, 1, 0, 1],
      [1, 0, 1, 1, 0, 1, 0],
      [1, 1, 0, 1, 0, 0, 1],
      [0, 0, 1, 0, 1, 1, 0],
      [0, 1, 1, 1, 0, 1, 0],
      [1, 0, 0, 1, 1, 0, 0],
      [1, 1, 0, 0, 1, 0, 1],
    ],

    // 追加パターン（91-100）
    [
      [1, 0, 1, 0, 0, 1, 0],
      [0, 1, 0, 1, 1, 0, 1],
      [1, 0, 0, 1, 0, 1, 1],
      [0, 1, 1, 0, 1, 0, 0],
      [1, 1, 0, 1, 0, 0, 1],
      [0, 0, 1, 0, 1, 1, 0],
      [1, 0, 0, 1, 1, 0, 1],
    ],
    [
      [0, 1, 1, 0, 1, 0, 0],
      [1, 0, 0, 1, 0, 1, 1],
      [0, 0, 1, 1, 1, 0, 0],
      [1, 1, 0, 0, 0, 1, 0],
      [0, 1, 0, 1, 1, 0, 1],
      [1, 0, 1, 0, 0, 1, 0],
      [0, 1, 1, 1, 0, 0, 1],
    ],
    [
      [1, 1, 0, 1, 0, 1, 1],
      [1, 0, 1, 0, 1, 0, 0],
      [0, 1, 0, 0, 1, 1, 0],
      [1, 0, 0, 1, 0, 1, 1],
      [0, 0, 1, 1, 0, 0, 1],
      [1, 1, 0, 0, 1, 0, 0],
      [0, 1, 1, 0, 0, 1, 1],
    ],
    [
      [0, 0, 1, 1, 1, 0, 1],
      [0, 1, 0, 1, 0, 1, 0],
      [1, 0, 1, 0, 0, 1, 1],
      [1, 1, 0, 0, 1, 0, 0],
      [1, 0, 0, 1, 1, 0, 1],
      [0, 1, 1, 0, 1, 1, 0],
      [1, 0, 1, 0, 0, 1, 0],
    ],
    [
      [1, 0, 0, 0, 1, 1, 0],
      [0, 1, 1, 1, 0, 0, 1],
      [0, 0, 1, 0, 1, 0, 1],
      [1, 1, 0, 1, 0, 1, 0],
      [0, 1, 0, 1, 1, 0, 0],
      [1, 0, 1, 0, 0, 1, 1],
      [0, 1, 1, 1, 0, 0, 1],
    ],
    [
      [0, 1, 0, 1, 0, 0, 1],
      [1, 0, 1, 0, 1, 1, 0],
      [0, 1, 1, 0, 0, 1, 0],
      [1, 0, 0, 1, 1, 0, 1],
      [1, 1, 0, 1, 0, 0, 0],
      [0, 1, 1, 0, 1, 0, 1],
      [1, 0, 0, 1, 0, 1, 1],
    ],
    [
      [1, 1, 1, 0, 0, 0, 1],
      [1, 0, 0, 1, 1, 1, 0],
      [0, 1, 0, 1, 0, 1, 0],
      [0, 0, 1, 0, 1, 0, 1],
      [1, 0, 1, 0, 0, 1, 1],
      [0, 1, 1, 1, 0, 0, 0],
      [1, 0, 0, 1, 1, 0, 1],
    ],
    [
      [0, 0, 1, 0, 1, 1, 1],
      [0, 1, 0, 1, 0, 0, 0],
      [1, 1, 1, 0, 0, 1, 0],
      [0, 1, 0, 1, 1, 0, 1],
      [1, 0, 0, 1, 0, 1, 0],
      [1, 0, 1, 0, 1, 0, 1],
      [0, 1, 0, 0, 1, 1, 0],
    ],
    [
      [1, 0, 1, 1, 0, 1, 0],
      [0, 1, 0, 0, 1, 0, 1],
      [1, 0, 0, 1, 1, 0, 0],
      [0, 0, 1, 0, 0, 1, 1],
      [1, 1, 0, 1, 0, 1, 0],
      [0, 1, 1, 0, 1, 0, 1],
      [1, 0, 1, 1, 0, 0, 0],
    ],
    [
      [0, 1, 1, 0, 0, 1, 1],
      [1, 0, 0, 1, 1, 0, 0],
      [1, 1, 0, 0, 1, 0, 1],
      [0, 0, 1, 1, 0, 1, 0],
      [0, 1, 0, 1, 1, 0, 1],
      [1, 0, 1, 0, 0, 1, 0],
      [1, 1, 0, 1, 0, 0, 1],
    ],
  ];
}

function setup() {
  createCanvas(800, 800);

  // 100通りのパターンを生成
  generatePatterns();

  // ランダムなパターンを選択
  currentPattern = random(patterns);

  // キャンバス全体に収まるグリッド数を計算
  gridCols = floor(width / cellSize);
  gridRows = floor(height / cellSize);

  // 中央配置のためのオフセットを計算
  offsetX = (width - gridCols * cellSize) / 2;
  offsetY = (height - gridRows * cellSize) / 2;

  noLoop();
}

function draw() {
  background(255);

  // 編み記号を描画（7x7パターンを繰り返し）
  for (let i = 0; i < gridCols; i++) {
    for (let j = 0; j < gridRows; j++) {
      let x = offsetX + i * cellSize;
      let y = offsetY + j * cellSize;

      // パターン配列から対応する記号を取得（繰り返し）
      let patternX = i % patternSize;
      let patternY = j % patternSize;
      let symbol = currentPattern[patternY][patternX];

      // 記号を描画
      drawSymbol(symbol, x, y, cellSize);
    }
  }

  // グリッド線を描画
  stroke(200);
  strokeWeight(1);

  for (let i = 0; i <= gridCols; i++) {
    let x = offsetX + i * cellSize;
    line(x, offsetY, x, offsetY + gridRows * cellSize);
  }

  for (let j = 0; j <= gridRows; j++) {
    let y = offsetY + j * cellSize;
    line(offsetX, y, offsetX + gridCols * cellSize, y);
  }
}

// 編み記号を描画する関数
function drawSymbol(symbol, x, y, size) {
  push();
  noStroke();

  if (symbol === KNIT) {
    // 表編み（白）
    fill(255);
  } else if (symbol === PURL) {
    // 裏編み（赤）
    fill(255, 0, 0);
  }

  rect(x, y, size, size);
  pop();
}

// キーボード入力でキャンバスを保存、またはパターンを変更
function keyPressed() {
  if (key === "s") {
    saveCanvas("knitting-chart", "png");
  } else if (key === " ") {
    // スペースキーで新しいランダムパターンを選択
    currentPattern = random(patterns);
    redraw();
  }
}
